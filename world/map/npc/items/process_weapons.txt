// Valc
// Code based on the Old Woman script than revise our equipment.
// This sample allow unequip items when there is not compatibility beteewn them.
// Dark Necknale require Banshee Bow equiped or no way.


function|script|ProcessWeapons
{
    set @equipedweapon, getequipid(equip_hand1);
    set @weapon, 1;
    set @weaponitem, @equipedweapon;


//Only Banshee Bow is compatible with Dark Necklace
    if (@weaponitem != 521) &&
       (@weaponitem != 522) &&
       (@weaponitem != 536) &&
       (@weaponitem != 548) &&
       (@weaponitem != 549) &&
       (@weaponitem != 570) &&
       (@weaponitem != 571) &&
       (@weaponitem != 579) &&
       (@weaponitem != 587) &&
       (@weaponitem != 588) &&
       (@weaponitem != 591) &&
       (@weaponitem != 594) &&
       (@weaponitem != 867) &&
       (@weaponitem != 1201) &&
       (@weaponitem != 8021) &&
       (@weaponitem != 8022) &&
       (@weaponitem != 8077) && goto L_Weapon;

    goto L_Return;

L_Weapon:
   //To handle weapon stuff before unequip it.
   set @weapon, 0;
   goto L_Unequip;

L_Unequip:
  //Unequip it showing a message from the char.
  message strcharinfo(0), "Arrrrgh! I need have equiped a right Melee Weapon!!";
  callfunc "UnequipLater";
  goto L_Return;

L_Return:
// Next line is only to test the equiped item ID, so this is usualy commented.
// message strcharinfo(0), "Weapon equipment: " + @weaponitem + " Weapon value: " + @weapon;
  return;
}
